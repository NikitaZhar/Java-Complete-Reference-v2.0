2025-11-04 13:08
Tags: #


- Иммутабельность `String` vs изменяемость массива; безопасность (очистка).
    
- Примеры ×3 / ошибки ×2 / подводные камни.

### Формальное определение

- JLS: «Although a `char[]` may sometimes be used to represent text, it is not formally a `String`. An array of characters is not the same as a `String` object.» ([Oracle Docs](https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html?utm_source=chatgpt.com "Chapter 10. Arrays"))
    

### Подтемы

9.1. Различия `char[]` и `String`  
9.2. Иммутабельность `String` vs изменяемость массива  
9.3. Безопасность и использование `char[]` (например, для паролей)

### Развёрнутое пояснение

**9.1 Факты:**  
`String` – ссылочный тип, класс `java.lang.String`, неизменяемый; `char[]` – массив примитивов `char`, изменяемый. Семантически они разные.  
**9.2 Иммутабельность:**  
`String s = "hello";` нельзя изменить содержимое; `char[] c = {'h','e','l','l','o'};` можно. Поэтому при работе с текстом и безопасностью (пароли) `char[]` иногда предпочитается.  
**9.3 Практика:**  
Массивы символов можно очищать вручную (например обнулять) для безопасности, чего нельзя сделать с `String`. Тем не менее это никак не отменяет: `char[]` ≠ `String`.

### Примеры (корректные)

```java
// Пример 1
char[] chars = {'J','a','v','a'};
String s = new String(chars);

// Пример 2
char[] pwd = new char[]{'p','a','s','s'};
Arrays.fill(pwd, '\0');    // очистка массива после использования

// Пример 3
String str = "hello";
char[] c = str.toCharArray();
c[0] = 'H';                 // работает, массив изменён
```

### Примеры (ошибочные)

```java
// Ошибка 1
char[] c2 = {'a','b','c'};
String s2 = c2;             // compile-time error: incompatible types

// Ошибка 2
String s3 = null;
char[] c3 = s3.toCharArray(); // runtime NullPointerException
```

### Типичные ошибки и подводные камни

- Ошибка: считать, что `char[]` эквивалентен `String` – нет.
    
- Подводный момент: после использования массива символов для чувствительных данных забывают его очищать.
    
- Ошибка: использовать `String` там, где нужен изменяемый буфер символов – тогда массив подходит лучше, но всё равно не является `String`.
    
