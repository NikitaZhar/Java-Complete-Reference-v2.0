2025-10-27 13:37
Tags: #toFormat 

4.1.1 Definition of Type — Определение типа

## **4.1.1.1 Формальное определение**

**Тип** в Java — это формальная характеристика данных, которая определяет:

1. **Множество допустимых значений**, которые может принимать выражение или переменная.
    
2. **Набор разрешённых операций**, которые могут быть применены к этим значениям.
    
3. **Правила совместимости** с другими типами (можно ли использовать значение данного типа в контексте другого типа).
    
4. **Контракт времени компиляции и выполнения**, определяющий корректность программы и поведение при её исполнении.
    

Тип задаёт _абстракцию_ данных: он не является значением сам по себе, а описывает свойства значений.

> Тип можно рассматривать как математическое множество, а значение — как конкретный элемент этого множества.

---

## **4.1.1.2 Роль типа в системе языка**

Типы выполняют в Java две ключевые роли:

### **1. Роль на этапе компиляции**

- Компилятор использует типы для:
    
    - проверки корректности выражений;
        
    - проверки совместимости при присваивании и передаче аргументов;
        
    - выбора перегруженных методов;
        
    - выявления ошибок ещё до выполнения программы.
        
- Тип выражения всегда известен на этапе компиляции.
    

### **2. Роль во время выполнения**

- Для ссылочных типов (reference types) существует **исполняемый тип** — фактический тип объекта в памяти JVM.
    
- JVM использует тип во время выполнения для:
    
    - динамической диспетчеризации методов (полиморфизм),
        
    - проверки приведения типов,
        
    - обработки исключений (`ClassCastException` при ошибочном приведении).
        

> Для примитивных типов статический тип полностью соответствует runtime-представлению.  
> Для ссылочных — статический и исполняемый тип могут различаться.

---

## **4.1.1.3 Тип как средство ограничения и гарантии корректности**

Тип **ограничивает** то, какие операции допустимы:

- Невозможно вызвать метод, не определённый типом.
    
- Нельзя выполнить арифметическую операцию над типом, который её не поддерживает.
    
- Нельзя присвоить значение одного типа переменной несовместимого типа.
    

```java
int x = 10;
String s = x; // Ошибка компиляции: несоответствие типов
```

Типы также гарантируют **типобезопасность** программы: корректная программа, прошедшая проверку типов, не нарушает модель памяти и не приводит к недопустимым операциям с данными (за исключением использования небезопасных механизмов).

---

## **4.1.1.4 Тип как часть контракта программы**

Тип определяет, _как именно_ поведение объекта или значения будет трактоваться:

- тип `int` означает целое число фиксированного диапазона;
    
- тип `String` означает объект, представляющий последовательность символов;
    
- тип `List<T>` означает структуру данных, содержащую элементы некоторого типа `T`;
    
- тип `void` определяет отсутствие возвращаемого значения (см. [[4.3.0 Reference Types — Overview]]).
    

Тип также определяет **идентичность на уровне JVM**: два типа считаются различными, даже если имеют одинаковую структуру, если они загружены разными загрузчиками классов.

**Ограничение:** `void` — это специальное обозначение отсутствия возвращаемого значения в сигнатуре метода и не является типом значений; `java.lang.Void` — ссылочный тип-маркер, используемый в обобщениях. См. [[Reference Types and Values → Special Reference Forms]].


---

## **4.1.1.5 Тип как элемент системы совместимости (Subtyping)**

Типы образуют **иерархию**:

- Один тип может быть _подтипом_ другого.
    
- Значение подтипа может использоваться там, где ожидается надтип.
    
- Тип определяет _контекст допустимого использования_ значения.
    

```java
Number n = Integer.valueOf(10); // Integer является подтипом Number
```

Подтипирование подробно рассматривается в разделе [[4.1.6 Subtypes and Supertypes]].

---

## **4.1.1.6 Типы на этапе компиляции и во время выполнения**

Java различает:

|Вид типа|Описание|Роль|
|---|---|---|
|**Compile-time type**|Статический тип, известный компилятору|Проверка корректности кода|
|**Runtime type**|Фактический тип объекта в куче|Определяет поведение и реальную реализацию методов|

```java
Number n = Double.valueOf(3.14);
// Статический тип: Number
// Исполняемый тип: Double
```

---

## **4.1.1.7 Вывод**

Тип — это **основной элемент системы языка**, отвечающий за формальное описание данных, проверку корректности программы и обеспечение её предсказуемого поведения.  
Без строгого определения типа невозможно сформировать следующие понятия: значения, переменные, выражения, наследование, полиморфизм, generics, преобразования и память JVM.

---

## **Cross-References**

- См. также:
    
    - **[[4.1.2 Definition of Value]]** — что такое значение и как оно связано с типом.
        
    - **[[4.1.3 High-Level Classification of Types]]** — примитивные и ссылочные типы.
        
    - **[[4.1.5 Static vs Runtime Type]]** — различия между статическим и исполняемым типом.
        
    - **[[4.3.0 Reference Types — Overview]]** — виды ссылочных типов и `null`.
        
    - **[[4.5.0 Generics — Overview]]** — типовые переменные и параметризованные типы.
        
