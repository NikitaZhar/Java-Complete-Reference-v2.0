2025-10-27 13:42
Tags: #toFormat

## 4.1.3.1 Основное разделение

Все типы в Java разделяются на **две фундаментальные категории**:

|Категория|Характеристика|Где подробно описано|
|---|---|---|
|**Primitive Types**|Определяют непосредственные значения|Раздел [[4.2 Primitive Types and Values]]|
|**Reference Types**|Представляют ссылки на объекты, массивы или `null`|Раздел [[4.3 Reference Types and Values]]|

Это разделение определяет:

- способ хранения значений,
    
- возможные операции,
    
- поведение при передаче и копировании,
    
- участие в системе подтипирования.
    

---

## 4.1.3.2 Примитивные типы (Primitive Types)

Примитивные типы являются **встроенными в язык** и не определяются пользователем.

**Свойства:**

- значения хранятся непосредственно;
    
- имеют фиксированный размер;
    
- не являются объектами;
    
- не допускают значение `null`;
    
- не участвуют в наследовании.
    

Примеры: `int`, `double`, `boolean`, `char`.

> Полный набор примитивных типов и их представление рассматривается в разделе [[4.2]].

**Примечание о будущих расширениях.**  
В будущих версиях Java (проект _Valhalla_) появится категория _value objects_ — типы, хранящие данные без идентичности, подобно примитивным, но с поведением классов.  
Они занимают промежуточное положение между примитивными и ссылочными типами, сочетая эффективность хранения с объектной моделью.

---

## 4.1.3.3 Ссылочные типы (Reference Types)

Ссылочные типы представляют **ссылки** на объекты в памяти JVM.

К ним относятся:

|Подвид ссылочного типа|Описание|Пример|
|---|---|---|
|**Class Types**|Пользовательские и встроенные классы|`String`, `ArrayList`|
|**Interface Types**|Определяют контракт поведения|`Runnable`, `List`|
|**Array Types**|Упорядоченные последовательности элементов одного типа|`int[]`, `String[]`|
|**Type Variables**|Параметры обобщённых типов|`T`, `E`, `K, V`|

> **Примечание о типовых переменных.**  
> Переменные типа (`T`, `E`, `K`, `V`) существуют **только на этапе компиляции**; во время выполнения их информация стирается (non-reifiable).  
> Они участвуют в проверке типов, но не определяют отдельного runtime-представления.  
> См. [[4.5 Generics and Type Variables]] и [[Reifiable vs Non-Reifiable Types]].

**Reifiable vs Non-Reifiable Types.**  
После компиляции информация о параметрах типов стирается (_type erasure_).  
Типы, сохраняющие полную информацию во время выполнения, называются _reifiable_.  
Пример: `String[]` и `List.class` — reifiable, а `List<String>` — non-reifiable.  
Это различие определяет, какие типы могут использоваться в `instanceof` и приведениях без предупреждений.

Все ссылочные типы неявно восходят к `java.lang.Object`, который является корнем иерархии типов.  
Даже массивы (`T[]`) унаследуют методы `equals`, `hashCode`, `toString` из `Object`.  
Это гарантирует единый набор базовых операций над всеми объектами в JVM.

**Свойства:**

- ссылки могут указывать на объект или иметь значение `null`;
    
- объекты размещаются в куче (`heap`);
    
- поддерживается наследование и полиморфизм;
    
- типовые переменные существуют только на этапе компиляции.
    

---

## 4.1.3.4 Особое значение `null`

- `null` является **единственным значением специального «null-type»**.
    
- Может быть присвоено любой переменной ссылочного типа.
    
- Не может быть присвоено переменной примитивного типа.
    

Подробнее: [[4.3.1 Null Type]].

---

## 4.1.3.5 Сравнение примитивных и ссылочных типов

|Характеристика|Примитивные типы|Ссылочные типы|
|---|---|---|
|Представление|значение хранится напрямую|ссылка на объект|
|Размещение|стек или поле объекта|ссылка в стеке, объект в куче|
|Поддержка `null`|нет|да (`null`)|
|Участие в наследовании|нет|да (подтипы и надтипы)|
|Изменяемость|неизменяемы|зависит от объекта|
|Использование в generics|невозможно|возможно|

Следует различать _значение_ и _объект_:  
примитивное значение существует само по себе,  
тогда как ссылочное значение — это указатель на объект в памяти.  
Две разные ссылки могут указывать на один и тот же объект, но всегда представляют разные значения.

---

## 4.1.3.6 Роль классификации

Это разделение на примитивные и ссылочные типы лежит в основе:

- **модели памяти JVM** (см. [[4.1.7 JVM Memory Model]]),
    
- **системы подтипирования** (см. [[4.1.6 Subtypes and Supertypes]]),
    
- **правил преобразования типов** (см. главу 5),
    
- **обобщённых типов и стирания** (см. [[4.5 Generics and Type Variables]]).
    

---

## 4.1.3.7 Вывод

Высокоуровневая классификация типов определяет фундаментальную структуру системы типов Java.  
Каждый тип в языке принадлежит к одной из двух основных категорий: _примитивной_ или _ссылочной_.  
В будущих версиях языка добавится третья группа — _value objects_, направленная на повышение эффективности и оптимизацию модели памяти.  
Дальнейшие подразделы этой главы описаны в соответствии с этой классификацией.

---

## Cross-References

- **[[4.1.2 Definition of Value]]** — значения, соответствующие типам.
    
- **[[4.2 Primitive Types and Values]]** — все примитивные типы и их диапазоны.
    
- **[[4.3 Reference Types and Values]]** — классы, интерфейсы, массивы, `null`.
    
- **[[4.1.5 Static vs Runtime Type]]** — влияние типа на выполнение.
    
- **[[4.1.7 JVM Memory Model]]** — размещение примитивов и объектов в памяти.
    

Смежные специальные ссылочные типы рассматриваются отдельно:

- **Enum Types** — перечисления ([[Enum Types]]),
    
- **Record Types** — записные классы ([[Record Types]]),
    
- **Annotation Types** — аннотационные ([[Annotation Types]]),
    
- **Class Literals и объекты `Class`** ([[Class Literals and Class Metadata]]).
    

---

Хочешь, чтобы я подготовил в том же академическом формате следующий раздел **4.2 Primitive Types and Values**, с полной таблицей типов, диапазонами, битовым представлением, поведением при преобразованиях и примечаниями по JVM инструкциям?