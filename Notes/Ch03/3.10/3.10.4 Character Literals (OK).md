2025-11-17 07:35
Tags: #CharacterLiterals #Escape

–°–æ–≥–ª–∞—Å–Ω–æ `Java Language Specification` (¬ß3.10.4), `CharacterLiteral` ‚Äî –æ–¥–∏–Ω –∏–∑ –≤–∏–¥–æ–≤ `Literal`
```java
Literal:
    IntegerLiteral
    FloatingPointLiteral
    BooleanLiteral
    CharacterLiteral
    StringLiteral
    NullLiteral

CharacterLiteral:
    'SingleCharacter'
    'EscapeSequence'
```

`char` ‚Äî —ç—Ç–æ **16-–±–∏—Ç–Ω—ã–π –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç UTF-16**,  
–∞ –Ω–µ —Å–∞–º —Å–∏–º–≤–æ–ª `Unicode`. –û–Ω —Ö—Ä–∞–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç `\u0000` –¥–æ `\uffff` (0‚Äì65 535).

### –ü—Ä–∏–º–µ—Ä—ã
```java
char c = 'A';
char omega = '\u03A9'; // Œ©
char newline = '\n';
```

> –õ–∏—Ç–µ—Ä–∞–ª `char` –≤—Å–µ–≥–¥–∞ –∑–∞–∫–ª—é—á—ë–Ω –≤ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ `' '`.  
> –î–æ–ø—É—Å—Ç–∏–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –∏–ª–∏ `escape`-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## 3.10.4.1 –î–∏–∞–ø–∞–∑–æ–Ω –∏ —Ç–∏–ø
```java
char min = '\u0000';
char max = '\uffff';
System.out.println((int) max); // 65535
```

> –¢–∏–ø `char` —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ **—Ü–µ–ª–æ–µ –±–µ–∑–∑–Ω–∞–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** (`unsigned`).  
> –ü—Ä–∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–µ `char` –Ω–µ—è–≤–Ω–æ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç—Å—è –¥–æ `int`.
```java
char c = 'A';
int code = c + 1;       // binary numeric promotion ‚Üí int
System.out.println(code);       // 66
System.out.println((char) code); // 'B'
```

## 3.10.4.2 Constant expressions
–õ–∏—Ç–µ—Ä–∞–ª—ã `char` –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö** (¬ß15.28).  
–¢–∞–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏  
–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ `case`, –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞—Ö.
```java
final char A = 'A';
final int X = 'A' + 1; // 66

switch ('B') {
    case A + 1 -> System.out.println("Match!");
}
```

> –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç `constant folding`, –∫–∞–∫ –∏ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤.

## 3.10.4.3 Autoboxing –∏ Character.valueOf()
–¢–∏–ø `char` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ø–∞–∫–æ–≤–∞–Ω –≤ –æ–±—ä–µ–∫—Ç `Character` –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∞–≤—Ç–æ–ø–∞–∫–æ–≤–∫–∏.  
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `Character.valueOf()`, –∫–æ—Ç–æ—Ä—ã–π –∫—ç—à–∏—Ä—É–µ—Ç —Å–∏–º–≤–æ–ª—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `\u0000‚Äì\u007F` (0‚Äì127, ASCII).
```java
Character ch1 = 'A';
Character ch2 = Character.valueOf('A');
System.out.println(ch1 == ch2); // true (–∫—ç—à)
```

> –î–ª—è —Å–∏–º–≤–æ–ª–æ–≤ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ ASCII —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.  
> –ù–∞–ø—Ä–∏–º–µ—Ä, `Character.valueOf('Œ©') != Character.valueOf('Œ©')` –º–æ–∂–µ—Ç –±—ã—Ç—å `true`.

## 3.10.4.4 Escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

|–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å|–ó–Ω–∞—á–µ–Ω–∏–µ|
|:--|:--|
|`\n`|–Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞|
|`\t`|—Ç–∞–±—É–ª—è—Ü–∏—è|
|`\b`|–∑–∞–±–æ–π|
|`\r`|–≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏|
|`\f`|–ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã|
|`\\`|–æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ—Å–∞—è —á–µ—Ä—Ç–∞|
|`\'`|–æ–¥–∏–Ω–∞—Ä–Ω–∞—è –∫–∞–≤—ã—á–∫–∞|
|`\"`|–¥–≤–æ–π–Ω–∞—è –∫–∞–≤—ã—á–∫–∞|
|`\ddd`|–æ–∫—Ç–∞–ª—å–Ω—ã–π –∫–æ–¥ (0‚Äì7, –¥–∏–∞–ø–∞–∑–æ–Ω \000‚Äì\377)|
|`\uXXXX`|Unicode-–∫–æ–¥ (hex)|

> –û–∫—Ç–∞–ª—å–Ω—ã–µ escape-–∫–æ–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–∞–¥–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `\uXXXX` –¥–ª—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç–∏.

### –û—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö
```java
char bad = '\x41'; // –æ—à–∏–±–∫–∞: –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞—è escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

> –î–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ `\b`, `\t`, `\n`, `\f`, `\r`, `\"`, `\'`, `\\`, `\ddd` –∏ `\uXXXX`.

## 3.10.4.5 Unicode –∏ Code Points
Java `char` —Ö—Ä–∞–Ω–∏—Ç **–æ–¥–∏–Ω –∫–æ–¥–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç UTF-16**, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–º–≤–æ–ª—ã (U+10000 –∏ –≤—ã—à–µ) —Ç—Ä–µ–±—É—é—Ç **–ø–∞—Ä—ã surrogate-—ç–ª–µ–º–µ–Ω—Ç–æ–≤**.
```java
String s = "üòÄ";
System.out.println(s.length()); // 2
System.out.println(s.codePointCount(0, s.length())); // 1
```

> `String.length()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–¥–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ `Unicode`.  
> –î–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `codePointCount()`.

## 3.10.4.6 –û—à–∏–±–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `char`-–ª–∏—Ç–µ—Ä–∞–ª –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
```java
char c = ''; // –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```
- –ù–µ–ª—å–∑—è —É–∫–∞–∑–∞—Ç—å –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- ```java
char c = 'AB'; // –æ—à–∏–±–∫–∞
```
- `Unicode-escape`-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `\uXXXX` —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è **–¥–æ** –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (¬ß3.2).  
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ `'\u0027'` –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `'\'`.

## –°–≤–æ–¥–∫–∞ –ø—Ä–∞–≤–∏–ª

|–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å|–ü—Ä–∏–º–µ—Ä|–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ|
|:--|:--|:--|
|–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª|`'A'`|—Ç–∏–ø `char`|
|Escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å|`'\n'`, `'\t'`|—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã|
|Unicode-escape|`'\u03A9'`|Œ©|
|–û–∫—Ç–∞–ª—å–Ω—ã–π –∫–æ–¥|`'\141'`|`'a'` (—É—Å—Ç–∞—Ä.)|
|–î–∏–∞–ø–∞–∑–æ–Ω|`'\u0000'` ‚Äì `'\uffff'`|0 ‚Äì 65 535|
|UTF-16 surrogate|`"üòÄ".length() == 2`|–æ–¥–∏–Ω —Å–∏–º–≤–æ–ª ‚Üí –¥–≤–∞ `char`|
|–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞|`'A' + 1`|—Ä–µ–∑—É–ª—å—Ç–∞—Ç `int`|
|–ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è|`final int X = 'A' + 1;`|–≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏|
|–ê–≤—Ç–æ–ø–∞–∫–æ–≤–∫–∞|`Character ch = 'A';`|–∫—ç—à –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `0‚Äì127`|
|–û—à–∏–±–∫–∏|`char c = '';`|–ø—É—Å—Ç–æ–π –ª–∏—Ç–µ—Ä–∞–ª –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º|

## 3.10.4.7 –°—Ö–µ–º–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ Character Literal
```mermaid
flowchart TD
    A["–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç"] --> B["Unicode translation (¬ß3.2)<br/>–æ–±—Ä–∞–±–æ—Ç–∫–∞ \\uXXXX"]
    B --> C["–õ–µ–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑<br/>(CharacterLiteral)"]
    C --> D["–û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª –∏–ª–∏ escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å<br/>'A', '\\n', '\\u03A9'"]
    D --> E["–¢–∏–ø–∏–∑–∞—Ü–∏—è: char (16-–±–∏—Ç, unsigned)"]
    E --> F["Binary numeric promotion<br/>(–ø—Ä–∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–µ ‚Üí int)"]
    E --> G["Autoboxing ‚Üí Character.valueOf(char)"]
    G --> H["–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ 0‚Äì127 (ASCII)"]
    E --> I["–í —Å—Ç—Ä–æ–∫–∞—Ö: UTF-16, –≤–æ–∑–º–æ–∂–Ω—ã surrogate-–ø–∞—Ä—ã"]
    F --> J["Constant folding<br/>(–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è)"]
    I --> K["–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞–Ω—Ç–∞–π–º–∞"]
    H --> K
    J --> K
```

## –†–µ–∑—é–º–µ
- `char` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç **–æ–¥–∏–Ω 16-–±–∏—Ç–Ω—ã–π –∫–æ–¥–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç UTF-16**, –∞ –Ω–µ –ø–æ–ª–Ω—ã–π Unicode-—Å–∏–º–≤–æ–ª.
- –î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π ‚Äî –æ—Ç `\u0000` –¥–æ `\uffff`.
- –¢–∏–ø `char` ‚Äî **–±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–π**, —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–µ –∫–∞–∫ `int`.
- `Character.valueOf()` –∫—ç—à–∏—Ä—É–µ—Ç ASCII-–¥–∏–∞–ø–∞–∑–æ–Ω `0‚Äì127`.
- Escape-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (`\n`, `\t`, `\uXXXX`) –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
- –°–∏–º–≤–æ–ª—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ `U+FFFF` –∫–æ–¥–∏—Ä—É—é—Ç—Å—è **–ø–∞—Ä–æ–π surrogate-—ç–ª–µ–º–µ–Ω—Ç–æ–≤**.
- `char`-–ª–∏—Ç–µ—Ä–∞–ª—ã –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö**, –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Unicode-escape `\uXXXX`, –∞ –Ω–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ–∫—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã.
