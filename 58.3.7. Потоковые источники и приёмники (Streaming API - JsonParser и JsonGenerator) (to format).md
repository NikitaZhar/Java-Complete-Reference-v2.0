2025-10-29 19:39
Tags: #

_(–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API Jackson –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è)_

---

## üéØ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ Streaming API**

Streaming API ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –Ω–∏–∂–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å Jackson. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (`InputStream`, `Reader`, `OutputStream`) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏–ª–∏ –∑–∞–ø–∏—Å–∏ JSON –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞:**

- JSON –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π (—Å–æ—Ç–Ω–∏ –º–µ–≥–∞–±–∞–π—Ç –∏–ª–∏ –≥–∏–≥–∞–±–∞–π—Ç—ã)
    
- –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –∫–∞–∫ –ø–æ—Ç–æ–∫ (—Å–µ—Ç–∏, —Ñ–∞–π–ª–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã, Kafka, HTTP streaming)
    
- –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é
    
- —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    
- –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á–∞—Å—Ç–∏—á–Ω–æ —á–∏—Ç–∞—Ç—å JSON (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏)
    

---

## **58.3.7.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã Streaming API**

|–ö–ª–∞—Å—Å|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|`JsonParser`|–ß—Ç–µ–Ω–∏–µ JSON, –≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É|
|`JsonToken`|–¢–∏–ø —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–∫–µ–Ω–∞ (`START_OBJECT`, `VALUE_STRING` –∏ —Ç.–¥.)|
|`JsonGenerator`|–ó–∞–ø–∏—Å—å JSON —Ç–æ–∫–µ–Ω –∑–∞ —Ç–æ–∫–µ–Ω–æ–º|
|`JsonFactory`|–§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–≤/–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤|

---

## **58.3.7.2. –ü—Ä–∏–º–µ—Ä: —á—Ç–µ–Ω–∏–µ JSON —Å JsonParser**

```java
JsonFactory factory = new JsonFactory();
try (JsonParser parser = factory.createParser(jsonInputStream)) {
    while (!parser.isClosed()) {
        JsonToken token = parser.nextToken();
        if (JsonToken.FIELD_NAME.equals(token) && "name".equals(parser.getCurrentName())) {
            parser.nextToken();
            System.out.println("Name: " + parser.getValueAsString());
        }
    }
}
```

üîπ –ß—Ç–µ–Ω–∏–µ –∏–¥—ë—Ç –ø–æ —Ç–æ–∫–µ–Ω–∞–º  
üîπ –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤  
üîπ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

---

## **58.3.7.3. –ü—Ä–∏–º–µ—Ä: –∑–∞–ø–∏—Å—å JSON —Å JsonGenerator**

```java
JsonFactory factory = new JsonFactory();
try (JsonGenerator generator = factory.createGenerator(System.out)) {
    generator.writeStartObject();
    generator.writeStringField("name", "Alice");
    generator.writeNumberField("age", 30);
    generator.writeArrayFieldStart("skills");
    generator.writeString("Java");
    generator.writeString("JSON");
    generator.writeEndArray();
    generator.writeEndObject();
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```json
{"name":"Alice","age":30,"skills":["Java","JSON"]}
```

---

## **58.3.7.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Streaming API —Å ObjectMapper**

ObjectMapper —Å–∞–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Streaming API –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:

```java
JsonFactory factory = mapper.getFactory();
JsonParser parser = factory.createParser(jsonString);
JsonNode node = mapper.readTree(parser);
```

üìå –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Streaming API –∏ —É–¥–æ–±—Å—Ç–≤–æ Data Binding.

#### **58.3.7.4a. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ NDJSON**

–ß—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –∏–ª–∏ NDJSON –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–∞–º—è—Ç—å:
```java
try (JsonParser p = mapper.getFactory().createParser(input)) {
    MappingIterator<Event> it = mapper.readerFor(Event.class).readValues(p);
    while (it.hasNextValue()) {
        Event e = it.nextValue();
        // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
    }
}
```



## **58.3.7.5. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Streaming API**

|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ|–û–±—ä—è—Å–Ω–µ–Ω–∏–µ|
|---|---|
|**–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**|–ß—Ç–µ–Ω–∏–µ –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ, –Ω–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ª–æ–≥–æ –¥–µ—Ä–µ–≤–∞|
|**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**|–ë–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏, —Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω—ã|
|**–ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö**|–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –Ω—É–∂–Ω–æ–º —Ç–æ–∫–µ–Ω–µ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É|
|**–ì–∏–±–∫–æ—Å—Ç—å**|–ß—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ JSON (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫)|

---

## **58.3.7.6. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å**

|–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫|–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ|
|---|---|
|–í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å|–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ä—É—á–Ω—É—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É|
|–û—à–∏–±–∫–∏ –ª–æ–≥–∏–∫–∏|–ü—Ä–æ–ø—É—Å–∫ —Ç–æ–∫–µ–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–≤—Ä–µ–¥–∏—Ç—å –≤–µ—Å—å JSON|
|–ù–µ—É–¥–æ–±–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤|–¢—Ä–µ–±—É–µ—Ç—Å—è –º–Ω–æ–≥–æ –∫–æ–¥–∞|

‚û° –ß–∞—Å—Ç–æ Streaming API –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤.

**–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã** —Å–ª–æ–∂–Ω–µ–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–æ–∫–µ–Ω–æ–≤; –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ JSON Schema/Bean Validation **–ø–æ—Å–ª–µ** –º–∞–ø–ø–∏–Ω–≥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ DTO –ª–∏–±–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–π.
---

## **58.3.7.7. –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ (Edge Cases)**

### ‚ùå –û—à–∏–±–∫–∞: –∑–∞–±—ã—Ç—ã–π `parser.nextToken()`

```java
if (parser.getCurrentToken() == JsonToken.FIELD_NAME) {
    // –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å parser.nextToken()
}
```

‚û° –ë–µ–∑ —ç—Ç–æ–≥–æ –∫—É—Ä—Å–æ—Ä –Ω–µ –ø–µ—Ä–µ–π–¥—ë—Ç –∫ –∑–Ω–∞—á–µ–Ω–∏—é, JSON —Å—Ç–∞–Ω–µ—Ç "–∑–∞—Å—Ç—Ä—è–≤—à–∏–º"

---

### ‚ùå –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞

```java
if (parser.getCurrentToken() == JsonToken.VALUE_STRING) {
    int age = parser.getIntValue(); // –û—à–∏–±–∫–∞: —Å—Ç—Ä–æ–∫—É –Ω–µ–ª—å–∑—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–∞–∫ int
}
```

‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```java
if (parser.getCurrentToken().isNumeric()) {
    int age = parser.getIntValue();
}
```

---

### ‚ùå –û—à–∏–±–∫–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Streaming API –¥–ª—è –º–µ–ª–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

‚û° –ö–æ–¥ —Å–ª–æ–∂–Ω—ã–π, –±–µ–∑ –≤—ã–∏–≥—Ä—ã—à–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Data Binding.

---

## **58.3.7.8. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Streaming API (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)**

‚úî –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ > 100 –ú–ë  
‚úî –í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ JSON —Å–æ–æ–±—â–µ–Ω–∏–π (Kafka, WebSocket)  
‚úî ETL/Big Data –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  
‚úî JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤)

‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –æ–±—ã—á–Ω—ã—Ö REST DTO

---

## **58.3.7.9. –í—ã–≤–æ–¥—ã**

- Streaming API ‚Äî —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å JSON.
    
- JsonParser/JsonGenerator –¥–∞—é—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—Ö–æ–¥–æ–º/–≤—ã—Ö–æ–¥–æ–º.
    
- ObjectMapper –∏ JsonNode —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ Streaming API.
    
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å—Ç—Ä–æ–≥–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö –∫ –ø–∞–º—è—Ç–∏ –∏ latency.
    
