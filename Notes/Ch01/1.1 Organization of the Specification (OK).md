2025-10-01 15:00
Tags: #JLS

## 1.1.1 Объём и границы
- `JLS` описывает язык Java, лексическую и синтаксическую грамматику, систему типов, семантику выражений/операторов, классов/интерфейсов/записей/перечислений/аннотаций, обработку исключений, модель памяти, дженерики, и пр.
- `JLS` не описывает библиотеку классов (`API`) и инструменты `JDK` (`javac`, `java` и др.) — они документированы отдельно в `Oracle Java SE API` и `JDK Tools`.
- `JVMS (Java Virtual Machine Specification)` — отдельная спецификация: формат `class`-файла, набор байт-кодов, проверка и выполнение. `JLS` и `JVMS` связаны, но независимы: одно и то же правило может формулироваться по-разному на уровне исходного кода и байткода.

> Практический вывод: если вопрос про «как написано» — ищите в JLS; если про «как выполняется/во что компилируется» — в JVMS; если про «какими классами пользоваться» — в API.

## 1.1.2 Структура по главам (высокоуровневый обзор)
- `Ch. 2 Grammars` — как устроены грамматики (лексическая и синтаксическая), как читать продукционные правила.
- `Ch. 3 Lexical Structure` — символы `Unicode`, перевод входного потока в токены, литералы, ключевые слова, комментарии.
- `Ch. 4–6` — типы/значения/переменные, преобразования/контексты, имена/области видимости.
- `Ch. 7–13` — пакеты/модули, классы/интерфейсы, enum/annotations/records, массивы.
- `Ch. 14–16` — блоки, операторы (в т.ч. `switch` и паттерны), выражения, исключения, утверждения, переходы управления.    
- `Ch. 17` — потоки исполнения и модель памяти `Java` (`JMM`).
- `Ch. 18` — дженерики: параметры типов, подстановки, стирание, вывод типов.
- `Ch. 19` — `Preview Features`: как отмечаются, как включаются/исключаются из стандарта.
- `Appendices` — формальные грамматики, индекс терминов и пр.

## 1.1.3 Нормативность и соответствие
- Текст спецификации делится на нормативные требования (`«must»`, `«shall»`) и информативные разделы (примеры, замечания).
- Соответствие реализаций: компилятор, распознающий программы, корректно написанные по `JLS`, и отвергающий некорректные, считается соответствующим; `JVM` должна принимать валидные `class`-файлы по `JVMS`.
- Предварительные (`preview`) возможности: не являются частью стабильной спецификации; включаются флагами компилятора/рантайма и помечаются отдельными абзацами.

## 1.1.4 Отношение к версиям и обратной совместимости
- Спецификация развивается итеративно. Новые возможности добавляются с сохранением совместимости; удаление возможно лишь после периода депрексации и только для не-ключевых аспектов языка.
- В `JLS` явно указываются семантические изменения по версиям (например, расширение `switch` до выражений, сопоставление с образцом, записи и запечатанные типы).

## Типичные вопросы и где искать

|Вопрос|Где смотреть|
|---|---|
|Разрешён ли такой синтаксис?|Ch. 2 (правило), Ch. 3/14/15 (лексика/операторы/выражения)|
|Какое значение/тип у выражения?|Ch. 4–5, Ch. 15|
|Почему код компилируется/не компилируется?|Правило из Ch. 2 + соответствующая глава, затем JLS «definite assignment», «overload resolution», «type inference»|
|Почему ведёт себя так во время выполнения?|JLS (семантика) + при необходимости JVMS (исполнение/верификация)|

## 1.1.5 Сопутствующие материалы: `JEP`, `Release Notes` и `Appendix`
- `JEP (JDK Enhancement Proposals)` — документы, описывающие замысел, мотивацию и детали новых функций до их включения в `JLS`.  
- `Release Notes JDK` фиксируют, в каких версиях языка активированы функции, исправлены ошибки или возникли несовместимости.  
- `Appendices JLS` содержат:  
  - формальные грамматики (A–Z),  
  - словарь терминов,  
  - изменения по редакциям.  

> При изучении новых функций важно сопоставлять JLS с соответствующим JEP и Release Notes.

## 1.1.6 Ограничения спецификации
- `JLS` не регламентирует производительность, стиль кода, оптимизации компиляторов, структуру байткода за пределами определённых правил.  
- Вопросы эффективности и реализации зависят от конкретного `JDK` и `JVM`.

## 1.1.7 Практические навигационные советы
| Тип вопроса                   | Источник                                                                             |
| ----------------------------- | ------------------------------------------------------------------------------------ |
| Допустимость синтаксиса       | Ch. 2, 3, 14, 15                                                                     |
| Тип и значение выражения      | Ch. 4–5, 15                                                                          |
| Ошибка компиляции             | соответствующее правило JLS, часто Ch. 16 (Definite Assignment), 18 (Type Inference) |
| Поведение во время выполнения | JLS (семантика) + JVMS (верификация, исполнение)                                     |
| Когда функция появилась       | JEP + Release Notes                                                                  |
