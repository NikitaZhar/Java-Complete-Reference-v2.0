2025-11-04 13:07
Tags: #


- `length` (final), наследование `Object`, `Cloneable`/`Serializable`, `clone()` = поверхностная копия.
    
- Примеры ×3 / ошибки ×2 / подводные камни.

(уточнить)

### Формальное определение

- JLS указывает: «An array type has certain members. . . . It implements interfaces `Cloneable` and `java.io.Serializable`. It has an instance field `length` (final) and inherits all methods of class `Object`.» ([Oracle Docs](https://docs.oracle.com/javase/specs/jls/se7/html/?utm_source=chatgpt.com "The Java® Language Specification"))
    

### Подтемы

7.1. Поле `length`  
7.2. Наследование от `Object` и интерфейсы  
7.3. Метод `clone()` и копирование массивов  
7.4. Ограничения: нет других методов

### Развёрнутое пояснение

**7.1 Поле `length`:**  
После создания массива `T[] a = …`, у объекта массива доступно поле `a.length` (не метод), которое возвращает число компонентов. Оно является `final` и неизменно.  
**7.2 Наследование и интерфейсы:**  
Массив является объектом, наследует `Object`, реализует `Cloneable` и `Serializable`. ([Oracle Docs](https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html?utm_source=chatgpt.com "Chapter 10. Arrays"))  
**7.3 Метод `clone()`:**  
Хотя массив не определяет собственный метод `clone()`, он наследует `protected Object clone()` от `Object`; массивы публично реализуют `clone()` возвращающий поверхностную копию: одномерный массив клонируется, но элементы (если ссылочные) не клонируются.  
**7.4 Нет других методов:**  
В отличие от коллекций, массивы не имеют методов `add`, `remove` и т.п. Все вспомогательные операции вынесены во внешний класс `java.util.Arrays`. ([Oracle Docs](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html?utm_source=chatgpt.com "Arrays (Java Platform SE 8 ) - Oracle Help Center"))

### Таблица членов массива

|Член|Описание|
|---|---|
|`public final int length`|число компонентов массива (доступно через `arr.length`)|
|методы `Object`|унаследованы, например `equals()`, `hashCode()`, `toString()`|
|интерфейсы `Cloneable`, `Serializable`|реализованы массивом автоматически|

### Примеры (корректные)

```java
// Пример 1
int[] a = {1,2,3};
System.out.println(a.length); // 3

// Пример 2
String[] s = new String[5];
Object o = s.clone();        // возвращает Object, который можно привести к String[]

// Пример 3
int[][] m = new int[2][3];
System.out.println(m instanceof Cloneable); // true
```

### Примеры (ошибочные)

```java
// Ошибка 1
int[] a2 = {1,2,3};
a2.length = 5;               // compile-time error: cannot assign to final field length

// Ошибка 2
String[] s2 = new String[4];
String[] s3 = (String[]) s2.clone();
s3[0] = "Hello";
// Полное копирование элементов-объектов не выполнено – это может быть неожиданным
```

### Типичные ошибки и подводные камни

- Подводный момент: метод `clone()` массива создаёт поверхностную копию – элементы-ссылки не клонируются.
    
- Ошибка: попытка вызвать метод `length()` (как если бы это был метод). Нужно использовать поле `length`.
    
- Ошибка: считать, что массив имеет методы коллекций – нет, операциями управляет внешний `Arrays`.
    
