2025-10-29 19:31
Tags: #


Jackson ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏", –Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ Java (–¥–∞—Ç—ã, Optional, Stream API, Kotlin, Java Records –∏ —Ç.–¥.) —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.

–ú–æ–¥—É–ª–∏ —Ä–µ—à–∞—é—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏:

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∏–ø–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä `LocalDate`)**
    
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π (Afterburner)**
    
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —è–∑—ã–∫–æ–≤—ã–º–∏ —Ñ–∏—á–∞–º–∏ (Kotlin, Scala)**
    

---

# **58.3.4.1. –¢–∏–ø—ã –º–æ–¥—É–ª–µ–π**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è              | –ú–æ–¥—É–ª—å                                                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                                                                           |
| ---------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ Java   | `jackson-datatype-jsr310`                                 | `LocalDate`, `LocalDateTime`, `Instant`                                                                                              |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å     | `jackson-module-afterburner`                              | —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏                                                                                                               |
| –Ø–∑—ã–∫–æ–≤—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è    | `jackson-module-kotlin`, `jackson-module-parameter-names` | –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è Kotlin data-–∫–ª–∞—Å—Å–æ–≤, Java records                                                                                     |
| –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –∏ —Ç–∏–ø—ã     | `jackson-module-jsonSchema`                               | –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π JSON Schema; —Å—Ç–∞—Ç—É—Å –∏ –∑—Ä–µ–ª–æ—Å—Ç—å –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏, –≤ –ø—Ä–æ–¥–µ —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã/–≤–∞–ª–∏–¥–∞—Ü–∏—é |
| Spring Boot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | (–≤—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)                                    | –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ObjectMapper                                                                                                        |

#### **Dataformat-–º–æ–¥—É–ª–∏ (YAML, XML, Smile, CBOR)**

Jackson ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, JSON –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω:

- **YAML** (`jackson-dataformat-yaml`) ‚Äî —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏/DevOps,
    
- **XML** (`jackson-dataformat-xml` / `XmlMapper`) ‚Äî —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy/SOAP,
    
- **Smile** (`jackson-dataformat-smile`) ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π ¬´—Å–∂–∞—Ç—ã–π JSON¬ª, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/–ø–æ–∏—Å–∫ (Elasticsearch),
    
- **CBOR** (`jackson-dataformat-cbor`) ‚Äî —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è/IoT/–º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã.  
    –ü—Ä–∏–º–µ—Ä:
```java
ObjectMapper yaml = new ObjectMapper(new YAMLFactory());
ObjectMapper xml  = new XmlMapper(); // –∏–∑ dataformat-xml
```

---

# **58.3.4.2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ –º–æ–¥—É–ª–∏**

### üìå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Java Time API:

```java
ObjectMapper mapper = new ObjectMapper();
mapper.registerModule(new JavaTimeModule());
mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
```

‚úÖ –ë–µ–∑ —ç—Ç–æ–≥–æ `LocalDateTime` –±—É–¥–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω –≤ timestamp ‚Üí –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π —á–∏—Å–ª–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç.

---

### üìå –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî Afterburner

```java
mapper.registerModule(new AfterburnerModule());
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–∞–π—Ç–∫–æ–¥ –Ω–∞ –ª–µ—Ç—É
    
- —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º
    
- —Å–Ω–∏–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
    

**‚ö† –í–∞–∂–Ω–æ:** Afterburner –Ω–µ –≤—Å–µ–≥–¥–∞ –±–µ–∑–æ–ø–∞—Å–µ–Ω –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å GraalVM native-image.

---

### üìå Kotlin Module

```kotlin
val mapper = ObjectMapper()
    .registerModule(KotlinModule.Builder().build())
    .registerModule(JavaTimeModule())
```

–ë–µ–∑ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è Kotlin `val` –∏ data-–∫–ª–∞—Å—Å–æ–≤ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É:

```
InvalidDefinitionException: Cannot construct instance of data class
```

---

### üìå ParameterNamesModule ‚Äî –¥–ª—è Java record

```java
mapper.registerModule(new ParameterNamesModule());
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç Jackson –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞.

**ParameterNamesModule ‚Äî –∫–æ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**

- –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –±–µ–∑ `@JsonCreator` –∏ **–±–µ–∑** `-parameters`;
    
- –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è **records** –±–µ–∑ —è–≤–Ω—ã—Ö `@JsonProperty`.  
    –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –∏–∑: `-parameters` **–∏–ª–∏** `ParameterNamesModule` **–∏–ª–∏** `@JsonCreator + @JsonProperty`.

---

# **58.3.4.3. Package scanning vs manual registration**

–í Spring Boot ObjectMapper –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏, –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ classpath.  
–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º Java SE —ç—Ç–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ‚Äî –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Ä—É—á–Ω—É—é.

---

## **58.3.4.4. MixIn Annotations (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞)**

**MixIn** –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫ –≤–Ω–µ—à–Ω–∏–º/immutable –∫–ª–∞—Å—Å–∞–º, –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—è –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥.

```java
class ExternalClass {
    public String value;
}

// –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MixIn:
abstract class ExternalMixIn {
    @JsonIgnore
    String value;
}

// –ü—Ä–∏–º–µ–Ω—è–µ–º:
mapper.addMixIn(ExternalClass.class, ExternalMixIn.class);
```

‚úÖ –ü–æ–ª–µ `value` –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è `ExternalClass`.

---

# **58.3.4.5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ObjectMapper**

```java
ObjectMapper mapper = new ObjectMapper()
    .registerModule(new JavaTimeModule())
    .configure(SerializationFeature.INDENT_OUTPUT, true)
    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)
    .setSerializationInclusion(JsonInclude.Include.NON_NULL);
```

---

# **58.3.4.6. –û—à–∏–±–∫–∏ –∏ edge cases**

### ‚ùå –û—à–∏–±–∫–∞: –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω JavaTimeModule

```json
"birthDate": [2025, 10, 24]
```

‚Üí —á–∏—Å–ª–æ, –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–µ –∫–ª–∏–µ–Ω—Ç—É.

‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å timestamp.

---

### ‚ùå –û—à–∏–±–∫–∞: Afterburner + Lambda Metafactory

–ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å:

```
java.lang.IllegalAccessError
```

‚úÖ –†–µ—à–µ–Ω–∏–µ: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π.

---

### ‚ùå –û—à–∏–±–∫–∞: Kotlin + default parameters

–ë–µ–∑ `KotlinModule` Jackson –Ω–µ —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —É–ø–∞–¥—ë—Ç.

---

# **58.3.4.7. –í—ã–≤–æ–¥—ã**

- **–ú–æ–¥—É–ª–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å Jackson** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ API Java.
    
- **ObjectMapper –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –æ–¥–∏–Ω —Ä–∞–∑**, —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –∏–ª–∏ —Ñ–∞–±—Ä–∏–∫—É.
    
- **MixIns** ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∞—Å—Å–æ–≤.
    
- **JavaTimeModule –∏ Afterburner ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ**.
    

